{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bluestacks/Projects/fdc-master/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bluestacks/Projects/fdc-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bluestacks/Projects/fdc-master/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import CalendarModel from'../models/CalenderModel';import{updateDoc,doc}from'firebase/firestore';import{db}from'../firebase-config';import{ClickableContext}from'../components/main';import{AiFillFile}from\"react-icons/ai\";import{IoStatsChart}from\"react-icons/io5\";import{FaCalendarAlt}from\"react-icons/fa\";import axios from'axios';import{useNavigate}from\"react-router-dom\";import'./Actions.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Actions(_ref){var data=_ref.data,dataChanged=_ref.dataChanged,setDataChanged=_ref.setDataChanged;//setClickable(false) is used to make Background div non clickable  \nvar setClickable=useContext(ClickableContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),calenderVis=_useState2[0],setCalenderVis=_useState2[1];var navigate=useNavigate();var handleDataChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(date){var campaign,newField;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:campaign=doc(db,'campaigns',data.id);newField={createdOn:date.getTime()};_context.next=4;return updateDoc(campaign,newField);case 4:setDataChanged(!dataChanged);setCalenderVis(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleDataChange(_x){return _ref2.apply(this,arguments);};}();var handleRequest=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var url;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();url=e.target.href;axios.get(url).then().catch(function(err){if(err.response.status==\"404\"){navigate(\"/error\");}});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleRequest(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"td\",{className:\"col actions\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(AiFillFile,{className:\"icon\",size:20,color:\"lightgreen\"}),/*#__PURE__*/_jsx(\"a\",{href:data.csv,onClick:function onClick(e){return handleRequest(e);},children:\"CSV\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(IoStatsChart,{className:\"icon\",size:20,color:\"orange\"}),/*#__PURE__*/_jsx(\"a\",{href:data.report,onClick:function onClick(e){return handleRequest(e);},children:\"Report\"})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(FaCalendarAlt,{className:\"icon\",size:20,color:\"lightblue\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setClickable(false);setCalenderVis(!calenderVis);},className:\"schedule\",children:\"Schedule Again\"}),calenderVis&&/*#__PURE__*/_jsx(CalendarModel,{date:new Date(data.createdOn),handleDataChange:handleDataChange,handleCalendarVis:function handleCalendarVis(){setCalenderVis(!calenderVis);}})]})]})});}export default Actions;","map":{"version":3,"sources":["/Users/bluestacks/Projects/fdc-master/src/components/Actions.js"],"names":["React","useState","useContext","CalendarModel","updateDoc","doc","db","ClickableContext","AiFillFile","IoStatsChart","FaCalendarAlt","axios","useNavigate","Actions","data","dataChanged","setDataChanged","setClickable","calenderVis","setCalenderVis","navigate","handleDataChange","date","campaign","id","newField","createdOn","getTime","handleRequest","e","preventDefault","url","target","href","get","then","catch","err","response","status","csv","report","Date"],"mappings":"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","sourcesContent":["import React, { useState , useContext } from 'react'\nimport CalendarModel from '../models/CalenderModel'\nimport {updateDoc ,doc} from 'firebase/firestore'\nimport {db} from '../firebase-config'\nimport { ClickableContext } from '../components/main';\nimport { AiFillFile} from \"react-icons/ai\";\nimport { IoStatsChart } from \"react-icons/io5\";\nimport {FaCalendarAlt } from \"react-icons/fa\" ;\nimport axios from 'axios';\nimport { useNavigate} from \"react-router-dom\";\nimport './Actions.css'\n\nfunction Actions({data, dataChanged ,setDataChanged}){\n    //setClickable(false) is used to make Background div non clickable  \n    const setClickable =  useContext(ClickableContext) ;\n    const[calenderVis , setCalenderVis] = useState(false) ; \n    const navigate = useNavigate() ;\n\n    var handleDataChange = async (date)=>{\n        const campaign = doc(db , 'campaigns' , data.id ) ;\n        const newField = {createdOn : date.getTime()}; \n        await updateDoc(campaign ,newField) ;\n        setDataChanged(!dataChanged) ;\n        setCalenderVis(false);\n    }\n\n    var handleRequest = async (e) =>{\n        e.preventDefault() ; \n        var url = e.target.href ; \n        axios.get(url).then().catch(err=>{\n            if(err.response.status == \"404\"){\n                navigate(\"/error\");\n            }\n        })\n\n    }\n    return (\n        <td className=\"col actions\">\n            <ul>\n                <li><AiFillFile className='icon' size={20} color='lightgreen'/><a href={data.csv} onClick={(e)=>handleRequest(e)}>CSV</a></li>\n                <li><IoStatsChart className='icon' size={20} color='orange'/><a href={data.report} onClick={(e)=>handleRequest(e)}>Report</a></li>\n                <li>\n                    <FaCalendarAlt className='icon' size={20} color='lightblue'/>\n                    <button onClick={()=>{\n                        setClickable(false);\n                        setCalenderVis(!calenderVis)\n                        }} className='schedule'>Schedule Again</button>\n                    {calenderVis&&<CalendarModel date ={new Date(data.createdOn)} handleDataChange = {handleDataChange} handleCalendarVis={()=>{setCalenderVis(!calenderVis)}} />}\n                </li>\n            </ul>\n        </td>\n    )\n}\n\nexport default Actions ; "]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bluestacks/Projects/fdc-master/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/bluestacks/Projects/fdc-master/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/bluestacks/Projects/fdc-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/bluestacks/Projects/fdc-master/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Nav from'./Nav';import Row from'./row';import{GetTimeDiff}from'../time';import{db}from'../firebase-config';import{collection,getDocs}from\"firebase/firestore\";import'./Main.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ClickableContext=/*#__PURE__*/React.createContext();function Main(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),clickable=_useState2[0],setClickable=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),campaigns=_useState4[0],setCampaigns=_useState4[1];//Upcoming Campaign is Represented by 1 \n//Live Campaign is represented by 0 \n//Past Campaign is represented by -1 \n//Initialy Campaign is set to 1  \nvar _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),campaignType=_useState6[0],setCampaignType=_useState6[1];//This is to check if campaign date is changed \nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),dataChanged=_useState8[0],setDataChanged=_useState8[1];var campaignsCollectionRef=collection(db,\"campaigns\");useEffect(function(){var getCampaigns=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(campaignsCollectionRef);case 2:data=_context.sent;setCampaigns(data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function getCampaigns(){return _ref.apply(this,arguments);};}();getCampaigns();},[dataChanged]);return/*#__PURE__*/_jsx(ClickableContext.Provider,{value:setClickable,children:/*#__PURE__*/_jsxs(\"div\",{className:clickable?\"container\":\"non-clickable-container\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Manage Campaigns\"})}),/*#__PURE__*/_jsx(Nav,{handleCampaignType:setCampaignType,handleDataChanged:function handleDataChanged(){setDataChanged(!dataChanged);}}),/*#__PURE__*/_jsxs(\"table\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"col\",children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col\",children:\"CAMPAIGN\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col\",children:\"VIEW\"}),/*#__PURE__*/_jsx(\"th\",{className:\"col\",children:\"ACTIONS\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:campaigns.map(function(item){if(compareParity(GetTimeDiff(new Date(item.createdOn),new Date()),campaignType)){return/*#__PURE__*/_jsx(Row,{data:item,dataChanged:dataChanged,setDataChanged:setDataChanged},item.id);}return null;})})]})]})});}function compareParity(first,second){if(first===0&&second===0)return true;if(first===0)return false;if(second===0)return false;var firstParity=first/Math.abs(first);var secondParity=second/Math.abs(second);if(firstParity===secondParity)return true;return false;}export default Main;","map":{"version":3,"sources":["/Users/bluestacks/Projects/fdc-master/src/components/main.js"],"names":["React","useEffect","useState","Nav","Row","GetTimeDiff","db","collection","getDocs","ClickableContext","createContext","Main","clickable","setClickable","campaigns","setCampaigns","campaignType","setCampaignType","dataChanged","setDataChanged","campaignsCollectionRef","getCampaigns","data","docs","map","doc","id","item","compareParity","Date","createdOn","first","second","firstParity","Math","abs","secondParity"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Nav from './Nav'\nimport Row from './row'\nimport {GetTimeDiff} from '../time'\nimport {db} from '../firebase-config'\nimport {collection , getDocs} from \"firebase/firestore\"\n\nimport './Main.css'\n\nexport const ClickableContext = React.createContext() ; \n\nfunction Main(){\n\n    const [clickable , setClickable] = useState(true) ;\n    const [campaigns , setCampaigns] = useState([]) ;\n    //Upcoming Campaign is Represented by 1 \n    //Live Campaign is represented by 0 \n    //Past Campaign is represented by -1 \n    //Initialy Campaign is set to 1  \n    const[campaignType , setCampaignType] = useState(1) ; \n\n    //This is to check if campaign date is changed \n    const[dataChanged , setDataChanged] = useState(false) ; \n\n    const campaignsCollectionRef = collection(db , \"campaigns\") ;\n    \n    useEffect(()=>{\n        const getCampaigns = async() =>{\n            const data = await getDocs(campaignsCollectionRef) ; \n            setCampaigns(data.docs.map((doc)=>({...doc.data() , id :doc.id}))) ; \n        }\n        getCampaigns() ; \n    } ,[dataChanged])\n\n    return(\n        <ClickableContext.Provider value={setClickable}>\n            <div className={clickable?\"container\":\"non-clickable-container\"}>\n                <header >\n                   <p>Manage Campaigns</p> \n                </header>\n                <Nav handleCampaignType = {setCampaignType} handleDataChanged={()=>{setDataChanged(!dataChanged)}}/>\n                <table className=\"main\">\n                    <thead>\n                        <tr>\n                            <th className='col'>DATE</th>\n                            <th className='col'>CAMPAIGN</th>\n                            <th className='col'>VIEW</th>\n                            <th className='col'>ACTIONS</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                    {\n                        campaigns.map(item=>{\n                            if(compareParity(GetTimeDiff(new Date(item.createdOn) , new Date()), campaignType)){\n                                return <Row key={item.id} data= {item} dataChanged= {dataChanged} setDataChanged={setDataChanged}></Row>\n                            }\n                            return null ;\n                        })\n                    }\n                    </tbody>\n                </table>\n            </div>\n        </ClickableContext.Provider>\n\n    \n        \n    )\n}\n\nfunction compareParity(first , second){\n    if(first === 0 && second ===0) return true ; \n    if(first === 0) return false ; \n    if(second === 0) return false ;\n\n    var firstParity = first/Math.abs(first) ; \n    var secondParity = second/Math.abs(second) ; \n    if(firstParity === secondParity) return true ; \n    return false ;\n}\n\nexport default Main ;"]},"metadata":{},"sourceType":"module"}